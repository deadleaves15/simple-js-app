let pokemonRepository = (function () {
  let t = [];
  function e(e) {
    t.push(e);
  }
  function n() {
    return t;
  }
  function o(t) {
    return fetch(t.detailsUrl)
      .then(function (t) {
        return t.json();
      })
      .then(function (e) {
        return (
          (t.imageUrl = e.sprites.front_default),
          (t.height = e.height),
          (t.types = e.types.map((t) => t.type.name)),
          t
        );
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  function i() {
    document.querySelector('#modal-container').classList.remove('is-visible');
  }
  return (
    window.addEventListener('keydown', (t) => {
      let e = document.querySelector('#modal-container');
      'Escape' === t.key && e.classList.contains('is-visible') && i();
    }),
    {
      add: e,
      addListItem: function t(e) {
        let n = document.createElement('li');
        n.classList.add('list-group-item');
        let o = document.createElement('button');
        o.classList.add('pokemon-button', 'btn', 'btn-primary'),
          o.setAttribute('data-toggle', 'modal'),
          o.setAttribute('data-target', '#pokemon-modal'),
          (o.textContent = e.name),
          n.appendChild(o),
          document.querySelector('.pokemon-list').appendChild(n),
          n.querySelector('.pokemon-button').addEventListener('click', () => {
            this.showDetails(e);
          });
      },
      getAll: n,
      loadDetails: o,
      loadList: function t() {
        return fetch('https://pokeapi.co/api/v2/pokemon/?limit=150')
          .then(function (t) {
            return t.json();
          })
          .then(function (t) {
            t.results.forEach(function (t) {
              e({ name: t.name, detailsUrl: t.url });
            });
          })
          .catch(function (t) {
            console.error(t);
          });
      },
      showDetails: function t(e) {
        o(e).then(function (t) {
          $('.modal-body')
            .empty()
            .append(`<img class="pokemon-img" src="${t.imageUrl}" />`)
            .append(`<p>Height: ${t.height}</p>`)
            .append(`<p>Types: ${t.types}</p>`),
            $('.modal-title').text(t.name);
        });
      },
      hideModal: i,
    }
  );
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
